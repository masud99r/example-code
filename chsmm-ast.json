{'Module': {'body': [{'Import': {'names': [{'alias': {'name': 'sys', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'os', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'math', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'random', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'argparse', 'asname': 'None'}}]}}, {'ImportFrom': {'names': [{'alias': {'name': 'defaultdict', 'asname': 'None'}}, {'alias': {'name': 'Counter', 'asname': 'None'}}], 'module': 'collections', 'level': 0}}, {'Import': {'names': [{'alias': {'name': 'heapq', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'torch', 'asname': 'None'}}]}}, {'Import': {'names': [{'alias': {'name': 'torch.nn', 'asname': 'nn'}}]}}, {'Import': {'names': [{'alias': {'name': 'torch.nn.functional', 'asname': 'F'}}]}}, {'Import': {'names': [{'alias': {'name': 'torch.optim', 'asname': 'optim'}}]}}, {'ImportFrom': {'names': [{'alias': {'name': 'Variable', 'asname': 'None'}}], 'module': 'torch.autograd', 'level': 0}}, {'Import': {'names': [{'alias': {'name': 'labeled_data', 'asname': 'None'}}]}}, {'ImportFrom': {'names': [{'alias': {'name': 'logsumexp1', 'asname': 'None'}}, {'alias': {'name': 'make_fwd_constr_idxs', 'asname': 'None'}}, {'alias': {'name': 'make_bwd_constr_idxs', 'asname': 'None'}}, {'alias': {'name': 'backtrace3', 'asname': 'None'}}, {'alias': {'name': 'backtrace', 'asname': 'None'}}], 'module': 'utils', 'level': 0}}, {'ImportFrom': {'names': [{'alias': {'name': 'get_wikibio_poswrds', 'asname': 'None'}}, {'alias': {'name': 'get_e2e_poswrds', 'asname': 'None'}}], 'module': 'data.utils', 'level': 0}}, {'Import': {'names': [{'alias': {'name': 'infc', 'asname': 'None'}}]}}, {'ClassDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n    standard hsmm\n    '}}}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': '__init__', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'HSMM'}}, {'Name': {'ctx': 'Load', 'id': 'self'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'super'}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'A_from', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'A_to', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'len_scores', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ones', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'requires_grad', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'len_scores', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'False'}}}}], 'orelse': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'len_decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Num': {'n': 2}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'yes_self_trans', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'yes_self_trans', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'yes_self_trans', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'op': 'Not'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'selfmask'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'selfmask'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'requires_grad'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'selfmask'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'diag', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'register_buffer', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Attribute': {'ctx': 'Store', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Store', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Store', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'arg': 'padding_idx'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wordtypes'}}, {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Embedding', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'False'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inp_feats'}}], 'value': {'Num': {'n': 4}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'sz_mult'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'mlp_sz_mult', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rnninsz'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'sz_mult'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'mlpinp_sz'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'inp_feats'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'inpmlp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'mlpinp_sz'}}, {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'sz_mult'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ReLU', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Sequential', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rnninsz'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'inp_feats'}}}}}}]}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'start_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'rnninsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'pad_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'rnninsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'body': [{'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'rnninsz'}}, 'value': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'op': 'Add'}}], 'orelse': []}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ModuleList', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'dropout', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'arg': 'dropout'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'rnninsz'}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LSTM', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'dropout', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'arg': 'dropout'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'rnninsz'}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LSTM', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': '_'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'dropout', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'arg': 'dropout'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LSTM', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'h0_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Num': {'n': 2}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_att_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_att_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_att2_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_att2_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'out_hid_sz'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_out_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'state_out_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}, {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'gentypes'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'gentypes'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'attn_lin1', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'linear_out', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'dropout', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Dropout', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'emb_drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'emb_drop', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'initrange', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'initrange', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'lsm', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'dim'}}], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LogSoftmax', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'IfExp': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'orelse': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'src_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'uniq_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Tensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Parameter', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'init_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'cond_A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cond_A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ReLU', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'BinOp': {'op': 'Mult', 'right': {'Num': {'n': 2}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'cond_A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Sequential', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'emb_size', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, {'BinOp': {'op': 'Mult', 'right': {'Num': {'n': 2}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'cond_A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'opt'}}}}}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Linear', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}, 'starargs': 'None'}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'init_weights', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'wordtypes'}}, {'Name': {'ctx': 'Param', 'id': 'gentypes'}}, {'Name': {'ctx': 'Param', 'id': 'opt'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': '__init__'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        (re)init weights\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'initrange'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'initrange', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'initrange'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'initrange'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'uniform_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf1>'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf2>'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf3>'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'params'}}], 'value': {'List': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'src_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'state_out_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'state_att_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'state_out_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'state_att_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'start_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'A_from', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'A_to', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'uniq_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'state_att2_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'state_att2_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'extend', 'value': {'Name': {'ctx': 'Load', 'id': 'params'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'params'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'initrange'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'initrange'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'uniform_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'param'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'param'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'params'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rnns'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'rnn'}}, 'iter': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'ifs': []}}], 'elt': {'Name': {'ctx': 'Load', 'id': 'rnn'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'rnns'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'initrange'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'initrange'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'uniform_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'thing'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'thing'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'rnn'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'rnn'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'rnns'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lins'}}], 'value': {'List': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'init_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'attn_lin1', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'linear_out', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'h0_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'smaller_cond_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'lins'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 2}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'extend', 'value': {'Name': {'ctx': 'Load', 'id': 'lins'}}}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'op': 'Not'}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'len_decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'lins'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'inpmlp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'lins'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'initrange'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'initrange'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'uniform_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Name': {'ctx': 'Load', 'id': 'lin'}}}}}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'bias', 'value': {'Name': {'ctx': 'Load', 'id': 'lin'}}}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'bias', 'value': {'Name': {'ctx': 'Load', 'id': 'lin'}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'lin'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'lins'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'init_weights'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        args:\n          uniqenc - bsz x emb_size\n        returns:\n          1 x K tensor and seqlen-1 x bsz x K x K tensor of log probabilities,\n                           where lps[i] is p(q_{i+1} | q_i)\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'uniqenc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'K'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'A_dim'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cond_trans_mat'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cond_trans_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'A_dim'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cond_A_dim', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'nufrom'}}, {'Name': {'ctx': 'Store', 'id': 'nuto'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'A_dim'}}, 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'cond_trans_mat'}}}}, {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'Name': {'ctx': 'Load', 'id': 'A_dim'}}, 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'cond_trans_mat'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'A_from'}}, {'Name': {'ctx': 'Store', 'id': 'A_to'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'A_from', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'A_to', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'p', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'A_from'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'A_from'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nufrom'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nufrom'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tscores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'A_from'}}, {'Name': {'ctx': 'Load', 'id': 'A_to'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'yes_self_trans', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'op': 'Not'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tscores'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'selfmask', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'tscores'}}}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'trans_lps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'tscores'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'trans_lps'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nufrom'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'nuto'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'trans_lps'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'trans_lps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_lps'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lsm', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'init_lps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'init_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lsm', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'init_lps'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_lps'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'uniqenc'}}, {'Name': {'ctx': 'Param', 'id': 'seqlen'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'trans_logprobs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        returns:\n           [1xK tensor, 2 x K tensor, .., L-1 x K tensor, L x K tensor] of logprobs\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'K'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'A_from', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 't', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'A_to', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'len_scores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'len_scores', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'len_scores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'state_embs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lplist'}}], 'value': {'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'new', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'len_scores'}}}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 't', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 0}}, {'Name': {'ctx': 'Load', 'id': 'l'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'len_scores'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lsm', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'lplist'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'l'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}, {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'lplist'}}, {'Name': {'ctx': 'Load', 'id': 'len_scores'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'len_logprobs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        xemb - bsz x seqlen x emb_size\n        returns - L+1 x bsz*seqlen x emb_size,\n           where [1 2 3 4]  becomes [<s> <s> <s> <s> <s> <s> <s> <s>]\n                 [5 6 7 8]          [ 1   2   3   4   5   6   7   8 ]\n                                    [ 2   3   4  <p>  6   7   8  <p>]\n                                    [ 3   4  <p> <p>  7   8  <p> <p>]\n        '}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'emb_size'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'xemb'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'newx'}}], 'value': {'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'start_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'xemb'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'newx'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'pad'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'i'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'pad_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rowi'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'xemb'}}}}, {'Name': {'ctx': 'Load', 'id': 'pad'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'rowi'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'newx'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'newx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'stack', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'xemb'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'to_seg_embs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        states - bsz x seqlen+1 x rnn_size\n        returns - L+1 x bsz*seqlen x emb_size,\n           where [<b> 1 2 3 4]  becomes [<b>  1   2   3  <b>  5   6   7 ]\n                 [<b> 5 6 7 8]          [ 1   2   3   4   5   6   7   8 ]\n                                        [ 2   3   4  <p>  6   7   8  <p>]\n                                        [ 3   4  <p> <p>  7   8  <p> <p>]\n        '}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'seqlenp1'}}, {'Name': {'ctx': 'Store', 'id': 'rnn_size'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'states'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'newh'}}], 'value': {'List': {'elts': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'seqlenp1'}}}}, 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'states'}}}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'Num': {'n': 1}}, 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'states'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'newh'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'pad'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'i'}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}, 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'pad_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rowi'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'states'}}}}, {'Name': {'ctx': 'Load', 'id': 'pad'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'rowi'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'newh'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'newh'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'stack', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'states'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'to_seg_hist'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': "\n        args:\n          x - seqlen x bsz x max_locs x nfeats\n          srcenc - bsz x emb_size\n          srcfieldenc - bsz x nfields x dim\n          fieldmask - bsz x nfields mask with 0s and -infs where it's a dummy field\n          combotargs - L x bsz*seqlen x max_locs\n        returns:\n          a L x seqlen x bsz x K tensor, where l'th row has prob of sequences of length l+1.\n          specifically, obs_logprobs[:,t,i,k] gives p(x_t|k), p(x_{t:t+1}|k), ..., p(x_{t:t+l}|k).\n          the infc code ignores the entries rows corresponding to x_{t:t+m} where t+m > T\n        "}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'maxlocs'}}, {'Name': {'ctx': 'Store', 'id': 'nfeats'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inpembs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mean', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'maxlocs'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'inpmlp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inpembs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mean', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'maxlocs'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'emb_drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inpembs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inpembs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 0}}}}, {'Index': {'value': {'Num': {'n': 0}}}}]}}, 'ctx': 'Load', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'maxlocs'}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mean', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 1}}}}]}}, 'ctx': 'Load', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'maxlocs'}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'emb_drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ar_embs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embsz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'ar_embs'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'embsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'embsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 2}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'ar_embs'}}], 'ctx': 'Load'}}, {'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'ar_states'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ar_embs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'segembs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'inpembs'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'to_seg_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'Lp1'}}, {'Name': {'ctx': 'Store', 'id': 'bszsl'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'segembs'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'segars'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'ar_states'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'to_seg_hist', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'nfields'}}, {'Name': {'ctx': 'Store', 'id': 'encdim'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'layers'}}, {'Name': {'ctx': 'Store', 'id': 'rnn_size'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inits'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'srcenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'h0_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'h0'}}, {'Name': {'ctx': 'Store', 'id': 'c0'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}, 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}, {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}, 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'h0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'layers'}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'h0'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'c0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'layers'}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'c0'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state_emb_sz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 3}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seg_lls'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'For': {'body': [{'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'condembs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'segembs'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'bszsl'}}, {'Name': {'ctx': 'Load', 'id': 'state_emb_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'states'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'condembs'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'h0'}}, {'Name': {'ctx': 'Load', 'id': 'c0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'states'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'segembs'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'h0'}}, {'Name': {'ctx': 'Load', 'id': 'c0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'states'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'segars'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'states'}}}}}}], 'orelse': []}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'p', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'states'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'drop', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin1'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'states'}}}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin1'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'Lp1'}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'attnin1'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin1'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin1'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin1'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ascores'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'fieldmask'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ascores'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'aprobs'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Num': {'n': 2}}, 'arg': 'dim'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ascores'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'softmax', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ctx'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'aprobs'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cat_ctx'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'states'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'ctx'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 3}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'out_hid_sz'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'encdim'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cat_ctx'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'states_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_out_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_out_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin2'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att2_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att2_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'states'}}}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin2'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'Lp1'}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'attnin2'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin2'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin2'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin2'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ascores'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'fieldmask'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ascores'}}}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'normfn'}}], 'value': {'IfExp': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': {'Attribute': {'ctx': 'Load', 'attr': 'log_softmax', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'orelse': {'Attribute': {'ctx': 'Load', 'attr': 'softmax', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wlps_k'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'dim'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'out_hid_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'states_k'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'Lp1'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'ascores'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'normfn'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wlps_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'wlps_k'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'wlps_k'}}}}, 'starargs': 'None'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'psk'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'bszsl'}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'combotargs'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'gather', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 0}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'bszsl'}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'wlps_k'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lls_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'psk'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'logsumexp1'}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lls_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'log', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Name': {'ctx': 'Load', 'id': 'psk'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seglls_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cumsum', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'lls_k'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'eop_lps'}}], 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}]}}, 'ctx': 'Load', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Name': {'ctx': 'Load', 'id': 'bszsl'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'bszsl'}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'wlps_k'}}}}, 'starargs': 'None'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'lse_obj', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seglls_k'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Name': {'ctx': 'Load', 'id': 'eop_lps'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'seglls_k'}}}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seglls_k'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'log', 'value': {'Name': {'ctx': 'Load', 'id': 'eop_lps'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'seglls_k'}}}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seglls_k'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'seg_lls'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'k'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'obslps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 3}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seg_lls'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'stack', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 1}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'obslps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'Kmul', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'repeat', 'value': {'Name': {'ctx': 'Load', 'id': 'obslps'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Return': {'value': {'Name': {'ctx': 'Load', 'id': 'obslps'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'x'}}, {'Name': {'ctx': 'Param', 'id': 'srcenc'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Param', 'id': 'fieldmask'}}, {'Name': {'ctx': 'Param', 'id': 'combotargs'}}, {'Name': {'ctx': 'Param', 'id': 'bsz'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'obs_logprobs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        args:\n          src - bsz x nfields x nfeats\n          avgmask - bsz x nfields, with 0s for pad and 1/tru_nfields for rest\n          uniqfields - bsz x maxfields\n        returns bsz x emb_size, bsz x nfields x emb_size\n        '}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'nfields'}}, {'Name': {'ctx': 'Store', 'id': 'nfeats'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'emb_size'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'embedding_dim', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'nfields'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'bsz'}}}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'src_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'relu', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'masked'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'masked'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'squeeze', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'masked'}}}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool1d', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'nfields'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'bsz'}}}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'src_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mean', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}]}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqfields'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'uniq_bias', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'uniqenc'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'relu', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'srcenc'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Load', 'id': 'uniqenc'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'src'}}, {'Name': {'ctx': 'Param', 'id': 'avgmask'}}, {'Name': {'ctx': 'Param', 'id': 'uniqfields'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'encode'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        hid - 1 x bsz x rnn_size\n        srcfieldenc - 1 x nfields x dim\n        returns a bsz x nthings dist; not a log dist\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'hid'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'nfields'}}, {'Name': {'ctx': 'Store', 'id': 'rnn_size'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srcfldenc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Name': {'ctx': 'Load', 'id': 'rnn_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin1'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'hid'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin1'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin1'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'attnin1'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfldenc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'aprobs'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Num': {'n': 2}}, 'arg': 'dim'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ascores'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'softmax', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ctx'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'aprobs'}}, {'Name': {'ctx': 'Load', 'id': 'srcfldenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cat_ctx'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'hid'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'ctx'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state_k'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_out_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_out_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'cat_ctx'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'sep_attn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin2'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att2_biases', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_att2_gates', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'hid'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'attnin2'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'attnin2'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'attnin2'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'srcfldenc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bmm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wlps_k'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'dim'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'squeeze', 'value': {'Name': {'ctx': 'Load', 'id': 'state_k'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'squeeze', 'value': {'Name': {'ctx': 'Load', 'id': 'ascores'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'softmax', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'wlps_k'}}}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'hid'}}, {'Name': {'ctx': 'Param', 'id': 'k'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'get_next_word_dist'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        wrd_dist is a K x nwords matrix and it gets modified.\n        this collapsing only makes sense if src_tbl is the same for every row.\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nout_wrds'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}, {'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'first_seen'}}], 'value': {'Dict': {'keys': [], 'values': []}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'field'}}}}, 'body': [{'If': {'test': {'Compare': {'ops': [{'NotIn': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'first_seen'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'first_seen'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, {'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'genset', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'widx'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'widx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'widx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'BinOp': {'op': 'Add', 'right': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'first_seen'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}]}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}]}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'field'}}, {'Name': {'ctx': 'Store', 'id': 'idx'}}, {'Name': {'ctx': 'Store', 'id': 'wrd'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'iteritems', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Param', 'id': 'wrd_dist'}}, {'Name': {'ctx': 'Param', 'id': 'corpus'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'collapse_word_probs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        ss - discrete state index\n        exh0 - layers x 1 x rnn_size\n        exc0 - layers x 1 x rnn_size\n        start_inp - 1 x 1 x emb_size\n        len_lps - K x L, log normalized\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rul_ss'}}], 'value': {'BinOp': {'op': 'Mod', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'genset'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'genset', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'unk_idx'}}, {'Name': {'ctx': 'Store', 'id': 'eos_idx'}}, {'Name': {'ctx': 'Store', 'id': 'pad_idx'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<unk>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<eos>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<pad>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state_emb_sz'}}], 'value': {'IfExp': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 3}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}, 'orelse': {'Num': {'n': 0}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cond_start_inp'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'start_inp'}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cond_start_inp'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'exh0'}}, {'Name': {'ctx': 'Load', 'id': 'exc0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'start_inp'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'exh0'}}, {'Name': {'ctx': 'Load', 'id': 'exc0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_hyps'}}], 'value': {'List': {'elts': [{'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_wscore'}}, {'Name': {'ctx': 'Store', 'id': 'best_lscore'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_hyp'}}, {'Name': {'ctx': 'Store', 'id': 'best_hyp_score'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_scores'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': 4}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wrd_dist'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cpu', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}, {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'get_next_word_dist', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'unk_idx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'final_state'}}, 'op': 'Not'}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'eos_idx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}, {'Name': {'ctx': 'Load', 'id': 'corpus'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'collapse_word_probs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'log_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'maxprobs'}}, {'Name': {'ctx': 'Store', 'id': 'top2k'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'K'}}, 'left': {'Num': {'n': 2}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'topk', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cols'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'eos_idx'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'top2k'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'final_hyp'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'backtrace'}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'eos_idx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'final_hyp'}}}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'final_hyp'}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'len_lps'}}}}}}], 'ctx': 'Load'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'new_hyps'}}, {'Name': {'ctx': 'Store', 'id': 'anc_hs'}}, {'Name': {'ctx': 'Store', 'id': 'anc_cs'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf1>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 1}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf2>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 2}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf3>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 3}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'anc'}}, {'Name': {'ctx': 'Store', 'id': 'wrd'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'cols'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'top2k'}}}}}}, {'BinOp': {'op': 'Mod', 'right': {'Name': {'ctx': 'Load', 'id': 'cols'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'top2k'}}}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wlenscore'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'len_lps'}}}}}}, 'left': {'BinOp': {'op': 'Div', 'right': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}}}}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_hyp_score'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wlenscore'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_hyp_score'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'wlenscore'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_hyp'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'backtrace'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_wscore'}}, {'Name': {'ctx': 'Store', 'id': 'best_lscore'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}, {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'len_lps'}}}}}}], 'ctx': 'Load'}}}}], 'orelse': []}}], 'orelse': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}}}, {'If': {'test': {'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tblidx'}}], 'value': {'BinOp': {'op': 'Sub', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'tblidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'row2feats'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'copy_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'genset'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}}}, 'body': {'Name': {'ctx': 'Load', 'id': 'wrd'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'unk_idx'}}}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'wrd'}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'new_hyps'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'hc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_hs'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'cc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_cs'}}}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Break': {}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'k'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'K'}}, 'left': {'Num': {'n': 2}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assert': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'msg': 'None'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_hyps'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'new_hyps'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'is_cuda', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'embs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'inpmlp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cond_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'embs'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'state_emb_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cond_embs'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_hs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_cs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'embs'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_hs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_cs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}]}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'ell'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wrd_dist'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cpu', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hid'}}, {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'get_next_word_dist', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'log_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wlenscore'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'len_lps'}}}}}}, 'left': {'BinOp': {'op': 'Div', 'right': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}}}}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_hyp_score'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wlenscore'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_hyp_score'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'wlenscore'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_hyp'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'backtrace'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_wscore'}}, {'Name': {'ctx': 'Store', 'id': 'best_lscore'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'len_lps'}}}}}}], 'ctx': 'Load'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'k'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'best_hyp'}}, {'Name': {'ctx': 'Load', 'id': 'best_wscore'}}, {'Name': {'ctx': 'Load', 'id': 'best_lscore'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'corpus'}}, {'Name': {'ctx': 'Param', 'id': 'ss'}}, {'Name': {'ctx': 'Param', 'id': 'start_inp'}}, {'Name': {'ctx': 'Param', 'id': 'exh0'}}, {'Name': {'ctx': 'Param', 'id': 'exc0'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Param', 'id': 'len_lps'}}, {'Name': {'ctx': 'Param', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Param', 'id': 'row2feats'}}, {'Name': {'ctx': 'Param', 'id': 'K'}}, {'Name': {'ctx': 'Param', 'id': 'final_state'}}], 'kwarg': 'None', 'defaults': [{'Name': {'ctx': 'Load', 'id': 'False'}}], 'vararg': 'None'}}, 'name': 'temp_bs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        src - 1 x nfields x nfeatures\n        h0 - rnn_size vector\n        c0 - rnn_size vector\n        srcfieldenc - 1 x nfields x dim\n        len_lps - K x L, log normalized\n        returns a list of phrases\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'phrases'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'tote_wscore'}}, {'Name': {'ctx': 'Store', 'id': 'tote_lscore'}}, {'Name': {'ctx': 'Store', 'id': 'tokes'}}, {'Name': {'ctx': 'Store', 'id': 'segs'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Num': {'n': 0.0}}, {'Num': {'n': 0.0}}, {'Num': {'n': 0.0}}, {'Num': {'n': 0.0}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'start_inp'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'start_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'exh0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'h0'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'exc0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'c0'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nout_wrds'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}, {'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}], 'ctx': 'Load'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'phrs_idxs'}}, {'Name': {'ctx': 'Store', 'id': 'wscore'}}, {'Name': {'ctx': 'Store', 'id': 'lscore'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'stidx'}}}}, 'arg': 'final_state'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'corpus'}}, {'Name': {'ctx': 'Load', 'id': 'k'}}, {'Name': {'ctx': 'Load', 'id': 'start_inp'}}, {'Name': {'ctx': 'Load', 'id': 'exh0'}}, {'Name': {'ctx': 'Load', 'id': 'exc0'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Load', 'id': 'len_lps'}}, {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'row2feats'}}, {'Attribute': {'ctx': 'Load', 'attr': 'beamsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'temp_bs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'phrs'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ii'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs_idxs'}}}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ii'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs_idxs'}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tblidx'}}], 'value': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ii'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs_idxs'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'wordstr'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'tblidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'verbose', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Str': {'s': ' (c)'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wordstr'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wordstr'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}]}}]}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'ii'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs_idxs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': '<eos>'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': -1}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}}}, 'body': [{'Break': {}}], 'orelse': []}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrases'}}}}, 'starargs': 'None'}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tote_wscore'}}, 'value': {'Name': {'ctx': 'Load', 'id': 'wscore'}}, 'op': 'Add'}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tote_lscore'}}, 'value': {'Name': {'ctx': 'Load', 'id': 'lscore'}}, 'op': 'Add'}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tokes'}}, 'value': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs_idxs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'op': 'Add'}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'segs'}}, 'value': {'Num': {'n': 1}}, 'op': 'Add'}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'stidx'}}, {'Name': {'ctx': 'Store', 'id': 'k'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'enumerate'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'phrases'}}, {'Name': {'ctx': 'Load', 'id': 'tote_wscore'}}, {'Name': {'ctx': 'Load', 'id': 'tote_lscore'}}, {'Name': {'ctx': 'Load', 'id': 'tokes'}}, {'Name': {'ctx': 'Load', 'id': 'segs'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'templt'}}, {'Name': {'ctx': 'Param', 'id': 'h0'}}, {'Name': {'ctx': 'Param', 'id': 'c0'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Param', 'id': 'len_lps'}}, {'Name': {'ctx': 'Param', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Param', 'id': 'row2feats'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'gen_one'}}, {'FunctionDef': {'body': [{'Assert': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'msg': 'None'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'exh0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'h0'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'exc0'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'layers', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Attribute': {'ctx': 'Load', 'attr': 'hid_size', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'c0'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'start_inp'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'start_emb', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state_emb_sz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 3}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}, {'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'genset'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'genset', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'unk_idx'}}, {'Name': {'ctx': 'Store', 'id': 'eos_idx'}}, {'Name': {'ctx': 'Store', 'id': 'pad_idx'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<unk>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<eos>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<pad>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_hyps'}}], 'value': {'List': {'elts': [{'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfeats'}}], 'value': {'Num': {'n': 4}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'curr_scores'}}, {'Name': {'ctx': 'Store', 'id': 'curr_lens'}}, {'Name': {'ctx': 'Store', 'id': 'nulens'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zeros', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'is_cuda', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'curr_scores'}}, {'Name': {'ctx': 'Store', 'id': 'curr_lens'}}, {'Name': {'ctx': 'Store', 'id': 'nulens'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'nulens'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rnnsz'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'hidden_size', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thc'}}, {'Name': {'ctx': 'Store', 'id': 'tcc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 1}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 2}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'weight', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'final_state'}}], 'value': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'stidx'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'minq'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rul_ss'}}], 'value': {'BinOp': {'op': 'Mod', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ss'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cond_start_inp'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'start_inp'}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cond_start_inp'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'exh0'}}, {'Name': {'ctx': 'Load', 'id': 'exc0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'start_inp'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'exh0'}}, {'Name': {'ctx': 'Load', 'id': 'exc0'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'hid'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'thid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Name': {'ctx': 'Load', 'id': 'hid'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'hc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'thc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Name': {'ctx': 'Load', 'id': 'hc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cc'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'tcc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Name': {'ctx': 'Load', 'id': 'cc'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'new_hyps'}}, {'Name': {'ctx': 'Store', 'id': 'anc_hs'}}, {'Name': {'ctx': 'Store', 'id': 'anc_cs'}}, {'Name': {'ctx': 'Store', 'id': 'anc_ths'}}, {'Name': {'ctx': 'Store', 'id': 'anc_tcs'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf1>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 1}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf2>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 2}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<ncf3>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 3}}}}]}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wrd_dist'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'thid'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'hid'}}}}, {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'get_next_word_dist', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'currK'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'unk_idx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'final_state'}}, 'op': 'Not'}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_', 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'eos_idx'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}, {'Name': {'ctx': 'Load', 'id': 'corpus'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'collapse_word_probs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'log_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'currK'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'mul_', 'value': {'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'currK'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'currK'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand_as', 'value': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'currK'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'div_', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'maxprobs'}}, {'Name': {'ctx': 'Store', 'id': 'top2k'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'K'}}, 'left': {'Num': {'n': 2}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'topk', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cols'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd_dist'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'anc'}}, {'Name': {'ctx': 'Store', 'id': 'wrd'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'cols'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'top2k'}}}}}}, {'BinOp': {'op': 'Mod', 'right': {'Name': {'ctx': 'Load', 'id': 'cols'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'top2k'}}}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'eop_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, {'BoolOp': {'values': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'final_state'}}, 'op': 'Not'}}, {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'eos_idx'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}}}}}], 'op': 'Or'}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'heapitem'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}, {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}}}}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'thc'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'tcc'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'minq'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'minq'}}, {'Name': {'ctx': 'Load', 'id': 'heapitem'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'heappush', 'value': {'Name': {'ctx': 'Load', 'id': 'heapq'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'minq'}}, {'Name': {'ctx': 'Load', 'id': 'heapitem'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'heappushpop', 'value': {'Name': {'ctx': 'Load', 'id': 'heapq'}}}}, 'starargs': 'None'}}}}]}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, 'body': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'maxprobs'}}}}}}, {'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'nulens'}}}}}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}}}}}}}, {'If': {'test': {'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tblidx'}}], 'value': {'BinOp': {'op': 'Sub', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'tblidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'row2feats'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'copy_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}}}}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'genset'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}}}, 'body': {'Name': {'ctx': 'Load', 'id': 'wrd'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'unk_idx'}}}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'wrd'}}, {'Name': {'ctx': 'Load', 'id': 'ss'}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'anc'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'new_hyps'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'hc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_hs'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'cc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_cs'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'thc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_ths'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'anc'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'narrow', 'value': {'Name': {'ctx': 'Load', 'id': 'tcc'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'anc_tcs'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}]}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Break': {}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'k'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'K'}}, 'left': {'Num': {'n': 2}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ell'}}}}, 'body': [{'Break': {}}], 'orelse': []}}, {'Assert': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'new_hyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'msg': 'None'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_hyps'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'new_hyps'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nulens'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'copy_', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lut', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 0}}}}]}}, 'ctx': 'Load', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ar_embs'}}], 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 1}}}}]}}, 'ctx': 'Load', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'nfeats'}}, {'Num': {'n': -1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Name': {'ctx': 'Load', 'id': 'embs'}}}}, 'starargs': 'None'}}}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'mlpinp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'embs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'inpmlp', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'one_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cond_embs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'embs'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'K'}}, {'Name': {'ctx': 'Load', 'id': 'state_emb_sz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state_embs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'cond_embs'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_hs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_cs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'hc'}}, {'Name': {'ctx': 'Store', 'id': 'cc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'embs'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_hs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_cs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'func': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'rul_ss'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'seg_rnns', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}, 'starargs': 'None'}}}}]}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thc'}}, {'Name': {'ctx': 'Store', 'id': 'tcc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'ar_embs'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_ths'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'anc_tcs'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ar_rnn', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'ell'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seghyps'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': '_'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'minq'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'minq'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'heappop', 'value': {'Name': {'ctx': 'Load', 'id': 'heapq'}}}}, 'starargs': 'None'}}}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seghyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Return': {'value': {'Tuple': {'elts': [{'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}], 'orelse': []}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seghyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, {'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'final_state'}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ugh'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'scoreick'}}, {'Name': {'ctx': 'Store', 'id': 'lenick'}}, {'Name': {'ctx': 'Store', 'id': 'hypick'}}, {'Name': {'ctx': 'Store', 'id': 'thcick'}}, {'Name': {'ctx': 'Store', 'id': 'tccick'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seghyps'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Tuple': {'elts': [{'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'ick'}}, 'left': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 9999999.0}}, 'left': {'Name': {'ctx': 'Load', 'id': 'scoreick'}}}}}}, {'Name': {'ctx': 'Load', 'id': 'lenick'}}, {'Name': {'ctx': 'Load', 'id': 'hypick'}}, {'Name': {'ctx': 'Load', 'id': 'thcick'}}, {'Name': {'ctx': 'Load', 'id': 'tccick'}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'ugh'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'ick'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Sub', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seghyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'K'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seghyps'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'extend', 'value': {'Name': {'ctx': 'Load', 'id': 'ugh'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seghyps'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'ugh'}}}}], 'orelse': []}}, {'If': {'test': {'Name': {'ctx': 'Load', 'id': 'final_state'}}, 'body': [{'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'seghyps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'scoreb'}}, {'Name': {'ctx': 'Store', 'id': 'lenb'}}, {'Name': {'ctx': 'Store', 'id': 'hypb'}}, {'Name': {'ctx': 'Store', 'id': 'thcb'}}, {'Name': {'ctx': 'Store', 'id': 'tccb'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': -1}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seghyps'}}}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'scoreb'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'hypb'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'backtrace3'}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}], 'orelse': [{'Return': {'value': {'Tuple': {'elts': [{'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}]}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thidlst'}}, {'Name': {'ctx': 'Store', 'id': 'thclst'}}, {'Name': {'ctx': 'Store', 'id': 'tcclst'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'scorei'}}, {'Name': {'ctx': 'Store', 'id': 'leni'}}, {'Name': {'ctx': 'Store', 'id': 'hypi'}}, {'Name': {'ctx': 'Store', 'id': 'thci'}}, {'Name': {'ctx': 'Store', 'id': 'tcci'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'K'}}}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seghyps'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_scores'}}}}}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Store', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_lens'}}}}}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'curr_hyps'}}}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'scorei'}}, {'Name': {'ctx': 'Load', 'id': 'leni'}}, {'Name': {'ctx': 'Load', 'id': 'hypi'}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': {'Num': {'n': -1}}, 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'thci'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'thidlst'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'thci'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'thclst'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'tcci'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'tcclst'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'K'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thid'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'thc'}}, {'Name': {'ctx': 'Store', 'id': 'tcc'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'thidlst'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'thclst'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'tcclst'}}, {'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cat', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}]}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'stidx'}}, {'Name': {'ctx': 'Store', 'id': 'ss'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'enumerate'}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'templt'}}, {'Name': {'ctx': 'Param', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Param', 'id': 'row2feats'}}, {'Name': {'ctx': 'Param', 'id': 'h0'}}, {'Name': {'ctx': 'Param', 'id': 'c0'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Param', 'id': 'len_lps'}}, {'Name': {'ctx': 'Param', 'id': 'K'}}, {'Name': {'ctx': 'Param', 'id': 'corpus'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'temp_ar_bs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n        src - 1 x nfields x nfeatures\n        h0 - rnn_size vector\n        c0 - rnn_size vector\n        srcfieldenc - 1 x nfields x dim\n        len_lps - K x L, log normalized\n        returns a list of phrases\n        '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nout_wrds'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'out_features', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'decoder', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}, {'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'phrases'}}, {'Name': {'ctx': 'Store', 'id': 'phrs'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tokes'}}], 'value': {'Num': {'n': 0.0}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'wscore'}}, {'Name': {'ctx': 'Store', 'id': 'hyp'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}, {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'row2feats'}}, {'Name': {'ctx': 'Load', 'id': 'h0'}}, {'Name': {'ctx': 'Load', 'id': 'c0'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Load', 'id': 'len_lps'}}, {'Attribute': {'ctx': 'Load', 'attr': 'beamsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Name': {'ctx': 'Load', 'id': 'corpus'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'temp_ar_bs', 'value': {'Name': {'ctx': 'Load', 'id': 'self'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Is': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'hyp'}}}}, 'body': [{'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}, {'Num': {'n': 0}}], 'ctx': 'Load'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_labe'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 1}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'hyp'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tokes'}}], 'value': {'Num': {'n': 0}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'NotEq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'curr_labe'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'labe'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrases'}}}}, 'starargs': 'None'}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tokes'}}, 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, 'op': 'Add'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'phrs'}}], 'value': {'List': {'elts': [], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'curr_labe'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'labe'}}}}], 'orelse': []}}, {'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'widx'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'widx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tblidx'}}], 'value': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'nout_wrds'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'widx'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'wordstr'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'tblidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'verbose', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Str': {'s': ' (c)'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wordstr'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'wordstr'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrs'}}}}, 'starargs': 'None'}}}}]}}]}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'widx'}}, {'Name': {'ctx': 'Store', 'id': 'labe'}}], 'ctx': 'Store'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'hyp'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'phrases'}}}}, 'starargs': 'None'}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tokes'}}, 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, 'op': 'Add'}}], 'orelse': []}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'phrases'}}, {'Name': {'ctx': 'Load', 'id': 'wscore'}}, {'Name': {'ctx': 'Load', 'id': 'tokes'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'self'}}, {'Name': {'ctx': 'Param', 'id': 'templt'}}, {'Name': {'ctx': 'Param', 'id': 'h0'}}, {'Name': {'ctx': 'Param', 'id': 'c0'}}, {'Name': {'ctx': 'Param', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Param', 'id': 'len_lps'}}, {'Name': {'ctx': 'Param', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Param', 'id': 'row2feats'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'gen_one_ar'}}], 'decorator_list': [], 'bases': [{'Attribute': {'ctx': 'Load', 'attr': 'Module', 'value': {'Name': {'ctx': 'Load', 'id': 'nn'}}}}], 'name': 'HSMM'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n    combines word and copy targets into a single tensor.\n    locs - seqlen x bsz x max_locs\n    x - seqlen x bsz\n    assumes we have word indices, then fields, then a dummy\n    returns L x bsz*seqlen x max_locs tensor corresponding to xsegs[1:]\n    '}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'max_locs'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'locs'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'addloc'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ngen_types'}}}}, 'left': {'Name': {'ctx': 'Load', 'id': 'locs'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'firstloc'}}], 'value': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Num': {'n': 0}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'addloc'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'targmask'}}], 'value': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'ngen_types'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'firstloc'}}}}}}, {'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'targmask'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'firstloc'}}}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'targmask'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}}}, {'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'ngen_types'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'addloc'}}}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'addloc'}}}}], 'value': {'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'nfields'}}, 'left': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ngen_types'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'newlocs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'nfields'}}, 'left': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'ngen_types'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'L'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'max_locs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Slice': {'upper': 'None', 'lower': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'addloc'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'copy_', 'value': {'Subscript': {'slice': {'Slice': {'upper': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'i'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'newlocs'}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'L'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'L'}}, {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'bsz'}}}}, {'Name': {'ctx': 'Load', 'id': 'max_locs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'view', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'contiguous', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'transpose', 'value': {'Name': {'ctx': 'Load', 'id': 'newlocs'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'locs'}}, {'Name': {'ctx': 'Param', 'id': 'x'}}, {'Name': {'ctx': 'Param', 'id': 'L'}}, {'Name': {'ctx': 'Param', 'id': 'nfields'}}, {'Name': {'ctx': 'Param', 'id': 'ngen_types'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'make_combo_targs'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n    src - bsz x nfields x nfeats\n    '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'keys'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'b'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}, {'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'keycol'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'set'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'list'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'maxkeys'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'GeneratorExp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'keyset'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'keys'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'keyset'}}}}, 'starargs': 'None'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'max'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'pad_idx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'maxkeys'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'keyset'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'copy_', 'value': {'Subscript': {'slice': {'Slice': {'upper': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'keyset'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'fields'}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'b'}}, {'Name': {'ctx': 'Store', 'id': 'keyset'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'keys'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'enumerate'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Name': {'ctx': 'Load', 'id': 'fields'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'src'}}, {'Name': {'ctx': 'Param', 'id': 'pad_idx'}}, {'Name': {'ctx': 'Param', 'id': 'keycol'}}], 'kwarg': 'None', 'defaults': [{'Num': {'n': 0}}], 'vararg': 'None'}}, 'name': 'get_uniq_fields'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Str': {'s': '\n    src - bsz x nfields x nfeats\n    '}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'neginf'}}], 'value': {'Num': {'n': -1e+38}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'bsz'}}, {'Name': {'ctx': 'Store', 'id': 'nfields'}}, {'Name': {'ctx': 'Store', 'id': 'nfeats'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fieldmask'}}], 'value': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'nfeats'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'pad_idx'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eq', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'avgmask'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'float', 'value': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'fieldmask'}}, 'left': {'Num': {'n': 1}}}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'max_pool'}}, 'op': 'Not'}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'expand', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Name': {'ctx': 'Load', 'id': 'True'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'div_', 'value': {'Name': {'ctx': 'Load', 'id': 'avgmask'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fieldmask'}}], 'value': {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'neginf'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'float', 'value': {'Name': {'ctx': 'Load', 'id': 'fieldmask'}}}}, 'starargs': 'None'}}}}}}, {'Return': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'fieldmask'}}, {'Name': {'ctx': 'Load', 'id': 'avgmask'}}], 'ctx': 'Load'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'src'}}, {'Name': {'ctx': 'Param', 'id': 'pad_idx'}}, {'Name': {'ctx': 'Param', 'id': 'max_pool'}}], 'kwarg': 'None', 'defaults': [{'Name': {'ctx': 'Load', 'id': 'False'}}], 'vararg': 'None'}}, 'name': 'make_masks'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'parser'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'description'}}], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'ArgumentParser', 'value': {'Name': {'ctx': 'Load', 'id': 'argparse'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'path to data dir'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-data'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 40}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'upper epoch limit'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-epochs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 16}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'batch size'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-bsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 1111}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'random seed'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-seed'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': 'use CUDA'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-cuda'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 200}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'minibatches to wait before logging training status'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-log_interval'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'path to save the final model'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-save'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'path to saved model'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': 'use test data'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-test'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 9}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'prune if occurs <= thresh'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-thresh'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 35000}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'max minibatches per epoch'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-max_mbs_per_epoch'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 100}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'size of word embeddings'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-emb_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 100}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'size of rnn hidden state'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-hid_size'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'num rnn layers'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-layers'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 64}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'dim of factors if factoring transition matrix'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-A_dim'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 32}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'dim of factors if factoring transition matrix'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-cond_A_dim'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 64}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'dim of thing we feed into linear to get transitions'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-smaller_cond_dim'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-yes_self_trans'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-mlpinp'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 2}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'mlp hidsz is this x emb_size'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-mlp_sz_mult'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': 'for word-fields'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-max_pool'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 100}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-constr_tr_epochs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 100}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-no_ar_epochs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-word_ar'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-ar_after_decay'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-no_ar_for_vit'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': 'only train ar rnn'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-fine_tune'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 0}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'dropout'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-dropout'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': 'dropout on embeddings'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-emb_drop'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-lse_obj'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-sep_attn'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 70}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-max_seqlen'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 10}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'number of states'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-K'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'number of states multiplier'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-Kmul'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 10}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'max segment length'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-L'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-unif_lenps'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-one_rnn'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 0.1}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'uniform init interval'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-initrange'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 1.0}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'initial learning rate'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-lr'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 0.5}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'learning rate decay'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-lr_decay'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': 'sgd'}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'optimization algorithm'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-optim'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-onmt_decay'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 5}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'gradient clipping'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-clip'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-interactive'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-label_train'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-gen_from_fi'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-verbose'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'None'}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-prev_loss'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'arg': 'type'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'None'}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-best_loss'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'path to tagged fi'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-tagged_fi'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 200}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': 'num templates for gen'}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-ntemplates'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 1}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-beamsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': '1,1'}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-gen_wts'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 0}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-min_gen_tokes'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'arg': 'type'}}, {'keyword': {'value': {'Num': {'n': 0}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-min_gen_states'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-gen_on_valid'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Str': {'s': 'store_true'}}, 'arg': 'action'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-align'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'arg': 'type'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'default'}}, {'keyword': {'value': {'Str': {'s': ''}}, 'arg': 'help'}}], 'kwargs': 'None', 'args': [{'Str': {'s': '-wid_workers'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_argument', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': '__main__'}}], 'left': {'Name': {'ctx': 'Load', 'id': '__name__'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'args'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parse_args', 'value': {'Name': {'ctx': 'Load', 'id': 'parser'}}}}, 'starargs': 'None'}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Name': {'ctx': 'Load', 'id': 'args'}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'seed', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'manual_seed', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'is_available', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}}}, 'starargs': 'None'}}, 'body': [{'If': {'test': {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'WARNING: You have a CUDA device, so you should probably run with -cuda'}}]}}], 'orelse': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'seed', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'manual_seed', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}}}, 'starargs': 'None'}}}}]}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'potential_path'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 5}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'bsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'potential_path'}}], 'value': {'Str': {'s': '/n/rush_lab/users/swiseman/templates/wb5-bsz5.pt'}}}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'gen_from_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'potential_path'}}], 'value': {'Str': {'s': 'wb5-justvocab.pt'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'potential_path'}}], 'value': {'Str': {'s': 'wb5.pt'}}}}]}}]}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'In': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Str': {'s': 'wiki'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'potential_path'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'exists', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'path', 'value': {'Name': {'ctx': 'Load', 'id': 'os'}}}}}}, 'starargs': 'None'}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'label_train', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Print': {'dest': {'Attribute': {'ctx': 'Load', 'attr': 'stderr', 'value': {'Name': {'ctx': 'Load', 'id': 'sys'}}}}, 'nl': True, 'values': [{'Str': {'s': 'loading dataset from'}}, {'Name': {'ctx': 'Load', 'id': 'potential_path'}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'corpus'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'potential_path'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'load', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'In': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Str': {'s': 'wiki'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'label_train', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'corpus'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'thresh', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'thresh'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'add_bos'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'add_eos'}}, {'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'test', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'test'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'bsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'SentenceCorpus', 'value': {'Name': {'ctx': 'Load', 'id': 'labeled_data'}}}}, 'starargs': 'None'}}}}, {'Print': {'dest': {'Attribute': {'ctx': 'Load', 'attr': 'stderr', 'value': {'Name': {'ctx': 'Load', 'id': 'sys'}}}}, 'nl': True, 'values': [{'Str': {'s': 'saving wb corpus...'}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'corpus'}}, {'Str': {'s': '/n/rush_lab/users/swiseman/templates/wb5.pt'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'save', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assert': {'test': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'msg': 'None'}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'corpus'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'thresh', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'thresh'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'add_bos'}}, {'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'add_eos'}}, {'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'test', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'test'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'bsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'SentenceCorpus', 'value': {'Name': {'ctx': 'Load', 'id': 'labeled_data'}}}}, 'starargs': 'None'}}}}]}}]}}, {'If': {'test': {'BoolOp': {'values': [{'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'interactive', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'label_train', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}, {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'gen_from_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'train_cidxs'}}, {'Name': {'ctx': 'Store', 'id': 'train_fwd_cidxs'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'List': {'elts': [], 'ctx': 'Load'}}, {'List': {'elts': [], 'ctx': 'Load'}}], 'ctx': 'Load'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': 'constrs'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'constrs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_bwd_constr_idxs'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'train_cidxs'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'constrs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_fwd_constr_idxs'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'train_fwd_cidxs'}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'saved_args'}}, {'Name': {'ctx': 'Store', 'id': 'saved_state'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'load', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'saved_stuff'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'load', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'load', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'saved_args'}}, {'Name': {'ctx': 'Store', 'id': 'saved_state'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': 'opt'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_stuff'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': 'state_dict'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_stuff'}}}}], 'ctx': 'Load'}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'NotIn': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': '__dict__', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'body': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Store', 'value': {'Attribute': {'ctx': 'Load', 'attr': '__dict__', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'v'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'k'}}, {'Name': {'ctx': 'Store', 'id': 'v'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'iteritems', 'value': {'Attribute': {'ctx': 'Load', 'attr': '__dict__', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'net'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}, {'Name': {'ctx': 'Load', 'id': 'saved_args'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'HSMM'}}, 'starargs': 'None'}}}}, {'Delete': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Str': {'s': 'selfmask'}}}}, 'ctx': 'Del', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_state'}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'False'}}, 'arg': 'strict'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'saved_state'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'load_state_dict', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<pad>'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'fine_tune', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'saved_state'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'name'}}}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'requires_grad', 'value': {'Name': {'ctx': 'Load', 'id': 'param'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'False'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'name'}}, {'Name': {'ctx': 'Store', 'id': 'param'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'named_parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<pad>'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'net'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}, {'Name': {'ctx': 'Load', 'id': 'args'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'HSMM'}}, 'starargs': 'None'}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'net'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': 'adagrad'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'optim', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'optalg'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'lr'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Lambda': {'body': {'Attribute': {'ctx': 'Load', 'attr': 'requires_grad', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}, 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'p'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'filter'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Adagrad', 'value': {'Name': {'ctx': 'Load', 'id': 'optim'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0.1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'fill_', 'value': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': 'sum'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'state', 'value': {'Name': {'ctx': 'Load', 'id': 'optalg'}}}}}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'p'}}, 'iter': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': 'params'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'group'}}}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'group'}}, 'iter': {'Attribute': {'ctx': 'Load', 'attr': 'param_groups', 'value': {'Name': {'ctx': 'Load', 'id': 'optalg'}}}}}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': 'rmsprop'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'optim', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'optalg'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'lr'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Lambda': {'body': {'Attribute': {'ctx': 'Load', 'attr': 'requires_grad', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}, 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'p'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'filter'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'RMSprop', 'value': {'Name': {'ctx': 'Load', 'id': 'optim'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': 'adam'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'optim', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'optalg'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'lr'}}], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Lambda': {'body': {'Attribute': {'ctx': 'Load', 'attr': 'requires_grad', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}, 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'p'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'filter'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'Adam', 'value': {'Name': {'ctx': 'Load', 'id': 'optim'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'optalg'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'None'}}}}]}}]}}]}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'neglogev'}}], 'value': {'Num': {'n': 0.0}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nsents'}}], 'value': {'Num': {'n': 0}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'trainperm'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'randperm', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nmini_batches'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'max_mbs_per_epoch', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'min'}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'zero_grad', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'src'}}, {'Name': {'ctx': 'Store', 'id': 'locs'}}, {'Name': {'ctx': 'Store', 'id': 'inps'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'batch_idx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'trainperm'}}}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cidxs'}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'LtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'constr_tr_epochs', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'epoch'}}}}, 'body': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'batch_idx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'trainperm'}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'train_cidxs'}}}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'None'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'max_seqlen', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}], 'op': 'Or'}}, 'body': [{'Continue': {}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'locs'}}, {'Name': {'ctx': 'Load', 'id': 'x'}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_combo_targs'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'max_pool'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_masks'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_uniq_fields'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'combotargs'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cidxs'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'tens'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}, 'ifs': []}}], 'elt': {'IfExp': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'starargs': 'None'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'None'}}}}}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'fmask'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'amask'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'uniqfields'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}, {'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'amask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'encode', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'trans_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'len_logprobs'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_obs_logps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'srcenc'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'fmask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'combotargs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'beta'}}, {'Name': {'ctx': 'Store', 'id': 'beta_star'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}, 'arg': 'constraints'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'trans_logps'}}, {'Name': {'ctx': 'Load', 'id': 'fwd_obs_logps'}}, {'Name': {'ctx': 'Load', 'id': 'len_logprobs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'just_bwd', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'log_marg'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'beta_star'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'logsumexp1'}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'neglogev'}}, 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'log_marg'}}}}}}, 'op': 'Sub'}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lossvar'}}], 'value': {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'bsz'}}, 'left': {'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'log_marg'}}, 'op': 'USub'}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'backward', 'value': {'Name': {'ctx': 'Load', 'id': 'lossvar'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'clip', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'clip_grad_norm', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'utils', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'nn', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'optalg'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'step', 'value': {'Name': {'ctx': 'Load', 'id': 'optalg'}}}}, 'starargs': 'None'}}}}], 'orelse': [{'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'grad', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'USub'}}, {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'grad', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'add_', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'p'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'p'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'parameters', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}]}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'nsents'}}, 'value': {'Name': {'ctx': 'Load', 'id': 'bsz'}}, 'op': 'Add'}}, {'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'BinOp': {'op': 'Mod', 'right': {'Attribute': {'ctx': 'Load', 'attr': 'log_interval', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'left': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'batch_idx'}}}}}}}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'batch_idx'}}}}, {'Name': {'ctx': 'Load', 'id': 'nmini_batches'}}, {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'nsents'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'neglogev'}}}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': 'batch %d/%d | train neglogev %g '}}}}]}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'batch_idx'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nmini_batches'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'epoch'}}, {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'nsents'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'neglogev'}}}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': 'epoch %d | train neglogev %g '}}}}]}}, {'Return': {'value': {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'nsents'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'neglogev'}}}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'epoch'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'train'}}, {'FunctionDef': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'neglogev'}}], 'value': {'Num': {'n': 0.0}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nsents'}}], 'value': {'Num': {'n': 0}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'src'}}, {'Name': {'ctx': 'Store', 'id': 'locs'}}, {'Name': {'ctx': 'Store', 'id': 'inps'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'valid', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cidxs'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'max_seqlen', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}], 'op': 'Or'}}, 'body': [{'Continue': {}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'locs'}}, {'Name': {'ctx': 'Load', 'id': 'x'}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_combo_targs'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'arg': 'max_pool'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_masks'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_uniq_fields'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'combotargs'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cidxs'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'tens'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}, 'ifs': []}}], 'elt': {'IfExp': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'starargs': 'None'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'None'}}}}}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'fmask'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'amask'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'uniqfields'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}, {'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'amask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'encode', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'trans_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'len_logprobs'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_obs_logps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'srcenc'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'fmask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'combotargs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'beta'}}, {'Name': {'ctx': 'Store', 'id': 'beta_star'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'cidxs'}}, 'arg': 'constraints'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'trans_logps'}}, {'Name': {'ctx': 'Load', 'id': 'fwd_obs_logps'}}, {'Name': {'ctx': 'Load', 'id': 'len_logprobs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'just_bwd', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'log_marg'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'sum', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Add', 'right': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'beta_star'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'logsumexp1'}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'neglogev'}}, 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'log_marg'}}}}}}, 'op': 'Sub'}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'nsents'}}, 'value': {'Name': {'ctx': 'Load', 'id': 'bsz'}}, 'op': 'Add'}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'valid', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'epoch'}}, {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'nsents'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'neglogev'}}}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': 'epoch %d | valid ev %g'}}}}]}}, {'Return': {'value': {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'nsents'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'neglogev'}}}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'epoch'}}], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'test'}}, {'FunctionDef': {'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'ar_after_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'no_ar_for_vit', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}], 'op': 'And'}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'btw, net.ar:'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}]}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'src'}}, {'Name': {'ctx': 'Store', 'id': 'locs'}}, {'Name': {'ctx': 'Store', 'id': 'inps'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_cidxs'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'LtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, 'body': [{'Continue': {}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'locs'}}, {'Name': {'ctx': 'Load', 'id': 'x'}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_combo_targs'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, 'arg': 'max_pool'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_masks'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_uniq_fields'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'combotargs'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'fwd_cidxs'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_cidxs'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'tens'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'fwd_cidxs'}}, 'ifs': []}}], 'elt': {'IfExp': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'tens'}}}}, 'starargs': 'None'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'None'}}}}}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'fmask'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'amask'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'uniqfields'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}, {'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'amask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'encode', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'trans_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'len_logprobs'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_obs_logps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'srcenc'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'fmask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'combotargs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'bwd_obs_logprobs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'fwd_obs_logps'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bwd_from_fwd_obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seqs'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'fwd_cidxs'}}, 'arg': 'constraints'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_logps'}}}}, {'Name': {'ctx': 'Load', 'id': 'bwd_obs_logprobs'}}, {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 't'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'len_logprobs'}}, 'ifs': []}}], 'elt': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 't'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'viterbi', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'words'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'w'}}, 'iter': {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'ifs': []}}], 'elt': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'w'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}}}, {'For': {'body': [{'Print': {'dest': 'None', 'nl': False, 'values': [{'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'end'}}, 'lower': {'Name': {'ctx': 'Load', 'id': 'start'}}, 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'words'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Str': {'s': ' '}}}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'label'}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': '%s|%d'}}}}]}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'start'}}, {'Name': {'ctx': 'Store', 'id': 'end'}}, {'Name': {'ctx': 'Store', 'id': 'label'}}], 'ctx': 'Store'}}, 'iter': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seqs'}}}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'b'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'label_train'}}, {'FunctionDef': {'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'ar_after_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}, {'Name': {'ctx': 'Store', 'id': 'w2i'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'word2idx', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_score'}}, {'Name': {'ctx': 'Store', 'id': 'best_phrases'}}, {'Name': {'ctx': 'Store', 'id': 'best_templt'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'UnaryOp': {'operand': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'op': 'USub'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_len'}}], 'value': {'Num': {'n': 0}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_tscore'}}, {'Name': {'ctx': 'Store', 'id': 'best_gscore'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_b'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'unsqueeze', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_tbl'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'featurize_tbl', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniq_b'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_b'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_uniq_fields'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_b'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'src_b'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniq_b'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'uniq_b'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}, {'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_b'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniq_b'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'encode', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}, {'Num': {'n': 2}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'trans_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'len_scores'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'len_lps'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'len_scores'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'lsm', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cpu', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cpu', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_logps'}}}}}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inits'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'srcenc'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'h0_lin', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'h0'}}, {'Name': {'ctx': 'Store', 'id': 'c0'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': {'BinOp': {'op': 'Div', 'right': {'Num': {'n': 2}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}, 'starargs': 'None'}}}}, 'lower': 'None', 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'tanh', 'value': {'Name': {'ctx': 'Load', 'id': 'F'}}}}, 'starargs': 'None'}}, {'Subscript': {'slice': {'ExtSlice': {'dims': [{'Slice': {'upper': 'None', 'lower': 'None', 'step': 'None'}}, {'Slice': {'upper': 'None', 'lower': {'BinOp': {'op': 'Div', 'right': {'Num': {'n': 2}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}, 'starargs': 'None'}}}}, 'step': 'None'}}]}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'inits'}}}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src_b'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'row2tblent'}}], 'value': {'Dict': {'keys': [], 'values': []}}}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'field'}}, {'Name': {'ctx': 'Store', 'id': 'idx'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ff'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src_b'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 1}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ff'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src_b'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}], 'ctx': 'Load'}}}}, {'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'src_tbl'}}], 'left': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'field'}}, {'Name': {'ctx': 'Load', 'id': 'idx'}}], 'ctx': 'Load'}}}}, 'body': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ff'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'field'}}, {'Name': {'ctx': 'Load', 'id': 'idx'}}, {'Subscript': {'slice': {'Index': {'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'field'}}, {'Name': {'ctx': 'Load', 'id': 'idx'}}], 'ctx': 'Load'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src_tbl'}}}}], 'ctx': 'Load'}}}}], 'orelse': [{'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ff'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'None'}}], 'ctx': 'Load'}}}}]}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'ff'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'row2feats'}}], 'value': {'Dict': {'keys': [], 'values': []}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fld_cntr'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'ListComp': {'generators': [{'comprehension': {'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'key'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'src_tbl'}}, 'ifs': []}}], 'elt': {'Name': {'ctx': 'Load', 'id': 'key'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Counter'}}, 'starargs': 'None'}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'w2i'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'widx'}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'w2i'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, 'orelse': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<unk>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'keyidx'}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'w2i'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'body': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, 'orelse': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<unk>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'idxidx'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'idx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cheatfeat'}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'idx'}}], 'left': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'k'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'fld_cntr'}}}}}}, 'body': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<stop>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}, 'orelse': {'Subscript': {'slice': {'Index': {'value': {'Str': {'s': '<go>'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'w2i'}}}}}}}}, {'Assign': {'targets': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'row'}}}}, 'ctx': 'Store', 'value': {'Name': {'ctx': 'Load', 'id': 'row2feats'}}}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'List': {'elts': [{'Name': {'ctx': 'Load', 'id': 'widx'}}, {'Name': {'ctx': 'Load', 'id': 'keyidx'}}, {'Name': {'ctx': 'Load', 'id': 'idxidx'}}, {'Name': {'ctx': 'Load', 'id': 'cheatfeat'}}], 'ctx': 'Load'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'LongTensor', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'row'}}, {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'k'}}, {'Name': {'ctx': 'Store', 'id': 'idx'}}, {'Name': {'ctx': 'Store', 'id': 'wrd'}}], 'ctx': 'Store'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'iteritems', 'value': {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'constr_sat'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'False'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tscores'}}], 'value': {'List': {'elts': [{'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'templt'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}}}}}], 'ctx': 'Load'}}}}, {'Expr': {'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'tt'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'tt'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'templt'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'tt'}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'templt'}}}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_logps'}}}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Name': {'ctx': 'Load', 'id': 'tscores'}}}}, 'starargs': 'None'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'phrases'}}, {'Name': {'ctx': 'Store', 'id': 'wscore'}}, {'Name': {'ctx': 'Store', 'id': 'tokes'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'h0'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'c0'}}}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Load', 'id': 'len_lps'}}, {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'row2feats'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'gen_one_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rul_tokes'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'tokes'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'phrases'}}, {'Name': {'ctx': 'Store', 'id': 'wscore'}}, {'Name': {'ctx': 'Store', 'id': 'lscore'}}, {'Name': {'ctx': 'Store', 'id': 'tokes'}}, {'Name': {'ctx': 'Store', 'id': 'segs'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'h0'}}}}, {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'c0'}}}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Load', 'id': 'len_lps'}}, {'Name': {'ctx': 'Load', 'id': 'row2tblent'}}, {'Name': {'ctx': 'Load', 'id': 'row2feats'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'gen_one', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'rul_tokes'}}], 'value': {'BinOp': {'op': 'Sub', 'right': {'Name': {'ctx': 'Load', 'id': 'segs'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'tokes'}}}}}}, {'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'wscore'}}, 'value': {'Name': {'ctx': 'Load', 'id': 'tokes'}}, 'op': 'Div'}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'segs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'templt'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, {'If': {'test': {'BoolOp': {'values': [{'BoolOp': {'values': [{'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'min_gen_tokes', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'rul_tokes'}}}}, {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'min_gen_states', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'segs'}}}}], 'op': 'Or'}}, {'Name': {'ctx': 'Load', 'id': 'constr_sat'}}], 'op': 'And'}}, 'body': [{'Continue': {}}], 'orelse': []}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'min_gen_tokes', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'rul_tokes'}}}}, {'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'min_gen_states', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'segs'}}}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'constr_sat'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tscore'}}], 'value': {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'segs'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Slice': {'upper': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'segs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'starargs': 'None'}}, 'lower': 'None', 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'tscores'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'sum'}}, 'starargs': 'None'}}}}}}, {'If': {'test': {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'unif_lenps', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'op': 'Not'}}, 'body': [{'AugAssign': {'target': {'Name': {'ctx': 'Store', 'id': 'tscore'}}, 'value': {'BinOp': {'op': 'Div', 'right': {'Name': {'ctx': 'Load', 'id': 'segs'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'lscore'}}}}, 'op': 'Add'}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'gscore'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'wscore'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'ascore'}}], 'value': {'BinOp': {'op': 'Add', 'right': {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'gscore'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 1}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'coeffs'}}}}}}, 'left': {'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'tscore'}}, 'left': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'coeffs'}}}}}}}}}}, {'If': {'test': {'BoolOp': {'values': [{'BoolOp': {'values': [{'Name': {'ctx': 'Load', 'id': 'constr_sat'}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_score'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ascore'}}}}], 'op': 'And'}}, {'BoolOp': {'values': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'constr_sat'}}, 'op': 'Not'}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_len'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'rul_tokes'}}}}], 'op': 'And'}}, {'BoolOp': {'values': [{'UnaryOp': {'operand': {'Name': {'ctx': 'Load', 'id': 'constr_sat'}}, 'op': 'Not'}}, {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_len'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'rul_tokes'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_score'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'ascore'}}}}], 'op': 'And'}}], 'op': 'Or'}}, 'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_score'}}, {'Name': {'ctx': 'Store', 'id': 'best_tscore'}}, {'Name': {'ctx': 'Store', 'id': 'best_gscore'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'ascore'}}, {'Name': {'ctx': 'Load', 'id': 'tscore'}}, {'Name': {'ctx': 'Load', 'id': 'gscore'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'best_phrases'}}, {'Name': {'ctx': 'Store', 'id': 'best_templt'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'phrases'}}, {'Name': {'ctx': 'Load', 'id': 'templt'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_len'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'rul_tokes'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'templt'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'top_temps'}}}}, {'TryExcept': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'str_phrases'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'phrs'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'best_phrases'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Str': {'s': ' '}}}}, 'starargs': 'None'}}}}}}], 'orelse': [], 'handlers': [{'ExceptHandler': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'str_phrases'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'phrs'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'best_phrases'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'n'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'phrs'}}, 'ifs': []}}], 'elt': {'IfExp': {'test': {'Compare': {'ops': [{'Is': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'int'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'n'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'type'}}, 'starargs': 'None'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'n'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'starargs': 'None'}}, 'orelse': {'Name': {'ctx': 'Load', 'id': 'n'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Str': {'s': ' '}}}}, 'starargs': 'None'}}}}}}], 'type': {'Name': {'ctx': 'Load', 'id': 'TypeError'}}, 'name': 'None'}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tmpltd'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'kk'}}, {'Name': {'ctx': 'Store', 'id': 'phrs'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'str_phrases'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'enumerate'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'phrs'}}, {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'kk'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'best_templt'}}}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': '%s|%d'}}}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'verbose', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Name': {'ctx': 'Load', 'id': 'src_line'}}]}}], 'orelse': []}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'str_phrases'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Str': {'s': ' '}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'tmpltd'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Str': {'s': ' '}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': '%s|||%s'}}}}]}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'verbose', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'statstr'}}], 'value': {'BinOp': {'op': 'Mod', 'right': {'Tuple': {'elts': [{'Name': {'ctx': 'Load', 'id': 'best_score'}}, {'Name': {'ctx': 'Load', 'id': 'best_tscore'}}, {'Name': {'ctx': 'Load', 'id': 'best_gscore'}}], 'ctx': 'Load'}}, 'left': {'Str': {'s': 'a=%.2f t=%.2f g=%.2f'}}}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Name': {'ctx': 'Load', 'id': 'statstr'}}]}}, {'Print': {'dest': 'None', 'nl': True, 'values': []}}], 'orelse': []}}], 'decorator_list': [], 'args': {'arguments': {'args': [{'Name': {'ctx': 'Param', 'id': 'src_tbl'}}, {'Name': {'ctx': 'Param', 'id': 'top_temps'}}, {'Name': {'ctx': 'Param', 'id': 'coeffs'}}, {'Name': {'ctx': 'Param', 'id': 'src_line'}}], 'kwarg': 'None', 'defaults': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'vararg': 'None'}}, 'name': 'gen_from_srctbl'}}, {'FunctionDef': {'body': [{'ImportFrom': {'names': [{'alias': {'name': 'do_posthoc_mapping', 'asname': 'None'}}, {'alias': {'name': 'align_cntr', 'asname': 'None'}}], 'module': 'posthoc2', 'level': 0}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'top_temps'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'no_align'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'bsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'tagged_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'ntemplates', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'do_posthoc_mapping'}}, 'starargs': 'None'}}}}, {'With': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_lines'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'readlines', 'value': {'Name': {'ctx': 'Load', 'id': 'f'}}}}, 'starargs': 'None'}}}}], 'optional_vars': {'Name': {'ctx': 'Store', 'id': 'f'}}, 'context_expr': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'gen_from_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'open'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'wid_workers', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'wid'}}, {'Name': {'ctx': 'Store', 'id': 'nworkers'}}], 'ctx': 'Store'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'n'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': ','}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'wid_workers', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'n'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'chunksz'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Div', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nworkers'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_lines'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'floor', 'value': {'Name': {'ctx': 'Load', 'id': 'math'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'startln'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'chunksz'}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wid'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'endln'}}], 'value': {'IfExp': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'nworkers'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wid'}}}}, 'body': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'BinOp': {'op': 'Mult', 'right': {'Name': {'ctx': 'Load', 'id': 'chunksz'}}, 'left': {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'wid'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'starargs': 'None'}}, 'orelse': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_lines'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}}}, {'Print': {'dest': {'Attribute': {'ctx': 'Load', 'attr': 'stderr', 'value': {'Name': {'ctx': 'Load', 'id': 'sys'}}}}, 'nl': True, 'values': [{'Str': {'s': 'worker'}}, {'Name': {'ctx': 'Load', 'id': 'wid'}}, {'Str': {'s': 'doing lines'}}, {'Name': {'ctx': 'Load', 'id': 'startln'}}, {'Str': {'s': 'thru'}}, {'BinOp': {'op': 'Sub', 'right': {'Num': {'n': 1}}, 'left': {'Name': {'ctx': 'Load', 'id': 'endln'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_lines'}}], 'value': {'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'endln'}}, 'lower': {'Name': {'ctx': 'Load', 'id': 'startln'}}, 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src_lines'}}}}}}], 'orelse': []}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'coeffs'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'flt'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': ','}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'gen_wts', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'flt'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'gen_on_valid', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 2}}], 'left': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'body': [{'Break': {}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'src'}}, {'Name': {'ctx': 'Store', 'id': 'locs'}}, {'Name': {'ctx': 'Store', 'id': 'inps'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'valid', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_line'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'val_mb2linenos', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src_lines'}}}}}}, {'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Str': {'s': 'wiki'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_tbl'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_wikibio_poswrds'}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_tbl'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_e2e_poswrds'}}, 'starargs': 'None'}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}, 'arg': 'src_line'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_tbl'}}, {'Name': {'ctx': 'Load', 'id': 'top_temps'}}, {'Name': {'ctx': 'Load', 'id': 'coeffs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'gen_from_srctbl'}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'b'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'valid', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'orelse': [{'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Str': {'s': 'wiki'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_tbl'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_wikibio_poswrds'}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_tbl'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_e2e_poswrds'}}, 'starargs': 'None'}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'src_line'}}, 'arg': 'src_line'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_tbl'}}, {'Name': {'ctx': 'Load', 'id': 'top_temps'}}, {'Name': {'ctx': 'Load', 'id': 'coeffs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'gen_from_srctbl'}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'll'}}, {'Name': {'ctx': 'Store', 'id': 'src_line'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src_lines'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'enumerate'}}, 'starargs': 'None'}}}}]}}], 'decorator_list': [], 'args': {'arguments': {'args': [], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'gen_from_src'}}, {'FunctionDef': {'body': [{'ImportFrom': {'names': [{'alias': {'name': 'do_posthoc_mapping', 'asname': 'None'}}], 'module': 'posthoc2', 'level': 0}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'i2w'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'idx2word', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cop_counters'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': '_'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'K', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Name': {'ctx': 'Load', 'id': 'Counter'}}, 'starargs': 'None'}}}}}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'ar_after_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'no_ar_for_vit', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Not'}}], 'op': 'And'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'top_temps'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'no_align'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'bsz', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'tagged_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'ntemplates', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'do_posthoc_mapping'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'top_temps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'GeneratorExp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'temp'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'top_temps'}}, 'ifs': []}}], 'elt': {'Name': {'ctx': 'Load', 'id': 'temp'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'set'}}, 'starargs': 'None'}}}}, {'With': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tgtlines'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'line'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'f'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}}}], 'optional_vars': {'Name': {'ctx': 'Store', 'id': 'f'}}, 'context_expr': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Str': {'s': 'train.txt'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'path', 'value': {'Name': {'ctx': 'Load', 'id': 'os'}}}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'open'}}, 'starargs': 'None'}}}}, {'With': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'srclines'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'line'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'f'}}, 'ifs': []}}], 'elt': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'split', 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'strip', 'value': {'Name': {'ctx': 'Load', 'id': 'line'}}}}, 'starargs': 'None'}}}}, 'starargs': 'None'}}}}}}], 'optional_vars': {'Name': {'ctx': 'Store', 'id': 'f'}}, 'context_expr': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Str': {'s': 'src_train.txt'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'join', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'path', 'value': {'Name': {'ctx': 'Load', 'id': 'os'}}}}}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'open'}}, 'starargs': 'None'}}}}, {'Assert': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'tgtlines'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'srclines'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'msg': 'None'}}, {'For': {'body': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'x'}}, {'Name': {'ctx': 'Store', 'id': '_'}}, {'Name': {'ctx': 'Store', 'id': 'src'}}, {'Name': {'ctx': 'Store', 'id': 'locs'}}, {'Name': {'ctx': 'Store', 'id': 'inps'}}], 'ctx': 'Store'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_cidxs'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'seqlen'}}, {'Name': {'ctx': 'Store', 'id': 'bsz'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'x'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'nfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'size', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'LtE': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}, {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'max_seqlen', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'seqlen'}}}}], 'op': 'Or'}}, 'body': [{'Continue': {}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'loc2types'}}], 'value': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'b'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 'ff'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'nfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}, 'ifs': []}}], 'elt': {'Subscript': {'slice': {'Index': {'value': {'Subscript': {'slice': {'Index': {'value': {'Num': {'n': 0}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'ff'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'b'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}}}}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'i2w'}}}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'locs'}}, {'Name': {'ctx': 'Load', 'id': 'x'}}, {'Attribute': {'ctx': 'Load', 'attr': 'L', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, {'Name': {'ctx': 'Load', 'id': 'nfields'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ngen_types', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_combo_targs'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Attribute': {'ctx': 'Load', 'attr': 'max_pool', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}, 'arg': 'max_pool'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'saved_args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'make_masks'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}, {'Attribute': {'ctx': 'Load', 'attr': 'pad_idx', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_uniq_fields'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'combotargs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'combotargs'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'src'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'inps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'inps'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'fmask'}}, {'Name': {'ctx': 'Store', 'id': 'amask'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'fmask'}}}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'amask'}}}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'uniqfields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'uniqfields'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'srcenc'}}, {'Name': {'ctx': 'Store', 'id': 'srcfieldenc'}}, {'Name': {'ctx': 'Store', 'id': 'uniqenc'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'src'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'amask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqfields'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'encode', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'init_logps'}}, {'Name': {'ctx': 'Store', 'id': 'trans_logps'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'uniqenc'}}, {'Name': {'ctx': 'Load', 'id': 'seqlen'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'trans_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'len_logprobs'}}, {'Name': {'ctx': 'Store', 'id': '_'}}], 'ctx': 'Store'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'len_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'fwd_obs_logps'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'inps'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'srcenc'}}, {'Name': {'ctx': 'Load', 'id': 'srcfieldenc'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'fmask'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'True'}}, 'arg': 'volatile'}}], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'combotargs'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'Variable'}}, 'starargs': 'None'}}, {'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'bwd_obs_logprobs'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'fwd_obs_logps'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'bwd_from_fwd_obs_logprobs', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'seqs'}}], 'value': {'Call': {'keywords': [{'keyword': {'value': {'Name': {'ctx': 'Load', 'id': 'fwd_cidxs'}}, 'arg': 'constraints'}}], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'init_logps'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 'trans_logps'}}}}, {'Name': {'ctx': 'Load', 'id': 'bwd_obs_logprobs'}}, {'ListComp': {'generators': [{'comprehension': {'target': {'Name': {'ctx': 'Store', 'id': 't'}}, 'iter': {'Name': {'ctx': 'Load', 'id': 'len_logprobs'}}, 'ifs': []}}], 'elt': {'Attribute': {'ctx': 'Load', 'attr': 'data', 'value': {'Name': {'ctx': 'Load', 'id': 't'}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'viterbi', 'value': {'Name': {'ctx': 'Load', 'id': 'infc'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'top_temps'}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'GeneratorExp': {'generators': [{'comprehension': {'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'start'}}, {'Name': {'ctx': 'Store', 'id': 'end'}}, {'Name': {'ctx': 'Store', 'id': 'labe'}}], 'ctx': 'Store'}}, 'iter': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'bidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seqs'}}}}, 'ifs': []}}], 'elt': {'Name': {'ctx': 'Load', 'id': 'labe'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'tuple'}}, 'starargs': 'None'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'lineno'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'bidx'}}}}, 'ctx': 'Load', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'i'}}}}, 'ctx': 'Load', 'value': {'Attribute': {'ctx': 'Load', 'attr': 'train_mb2linenos', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'tgttokes'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'lineno'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'tgtlines'}}}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'src_tbl'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'lineno'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'srclines'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'get_e2e_poswrds'}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'wrd2fields'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'list'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'defaultdict'}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'field'}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'append', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd2fields'}}}}}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'field'}}, {'Name': {'ctx': 'Store', 'id': 'idx'}}], 'ctx': 'Store'}}, {'Name': {'ctx': 'Store', 'id': 'wrd'}}], 'ctx': 'Store'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'iteritems', 'value': {'Name': {'ctx': 'Load', 'id': 'src_tbl'}}}}, 'starargs': 'None'}}}}, {'For': {'body': [{'For': {'body': [{'If': {'test': {'Compare': {'ops': [{'In': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'wrd2fields'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'wrd'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'wrd2fields'}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'update', 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'labe'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'cop_counters'}}}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'wrd'}}, 'iter': {'Subscript': {'slice': {'Slice': {'upper': {'Name': {'ctx': 'Load', 'id': 'end'}}, 'lower': {'Name': {'ctx': 'Load', 'id': 'start'}}, 'step': 'None'}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'tgttokes'}}}}}}], 'orelse': [], 'target': {'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'start'}}, {'Name': {'ctx': 'Store', 'id': 'end'}}, {'Name': {'ctx': 'Store', 'id': 'labe'}}], 'ctx': 'Store'}}, 'iter': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'bidx'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'seqs'}}}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'bidx'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'bsz'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'i'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'train', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'xrange'}}, 'starargs': 'None'}}}}, {'Return': {'value': {'Name': {'ctx': 'Load', 'id': 'cop_counters'}}}}], 'decorator_list': [], 'args': {'arguments': {'args': [], 'kwarg': 'None', 'defaults': [], 'vararg': 'None'}}, 'name': 'align_stuff'}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'interactive', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Pass': {}}], 'orelse': [{'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'align', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'cop_counters'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Name': {'ctx': 'Load', 'id': 'align_stuff'}}, 'starargs': 'None'}}}}], 'orelse': [{'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'label_train', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Name': {'ctx': 'Load', 'id': 'label_train'}}, 'starargs': 'None'}}}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'gen_from_fi', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Name': {'ctx': 'Load', 'id': 'gen_from_src'}}, 'starargs': 'None'}}}}], 'orelse': [{'If': {'test': {'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'epochs', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 0}}], 'func': {'Name': {'ctx': 'Load', 'id': 'test'}}, 'starargs': 'None'}}}}], 'orelse': [{'Assign': {'targets': [{'Tuple': {'elts': [{'Name': {'ctx': 'Store', 'id': 'prev_valloss'}}, {'Name': {'ctx': 'Store', 'id': 'best_valloss'}}], 'ctx': 'Store'}}], 'value': {'Tuple': {'elts': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Str': {'s': 'inf'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'float'}}, 'starargs': 'None'}}], 'ctx': 'Load'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'decayed'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'False'}}}}, {'If': {'test': {'Compare': {'ops': [{'IsNot': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'prev_loss', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'prev_valloss'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'prev_loss', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, {'If': {'test': {'Compare': {'ops': [{'Is': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'None'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'best_loss', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_valloss'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'prev_valloss'}}}}], 'orelse': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'decayed'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_valloss'}}], 'value': {'Attribute': {'ctx': 'Load', 'attr': 'best_loss', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}]}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'starting with'}}, {'Name': {'ctx': 'Load', 'id': 'prev_valloss'}}, {'Name': {'ctx': 'Load', 'id': 'best_valloss'}}]}}], 'orelse': []}}, {'For': {'body': [{'If': {'test': {'BoolOp': {'values': [{'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Attribute': {'ctx': 'Load', 'attr': 'no_ar_epochs', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'left': {'Name': {'ctx': 'Load', 'id': 'epoch'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'op': 'Not'}}, {'Name': {'ctx': 'Load', 'id': 'decayed'}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'turning on word ar...'}}]}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}], 'orelse': []}}], 'orelse': []}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'ar:'}}, {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}]}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'epoch'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'train'}}, 'starargs': 'None'}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'eval', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'valloss'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'epoch'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'test'}}, 'starargs': 'None'}}}}, {'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'best_valloss'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'valloss'}}}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'best_valloss'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'valloss'}}}}, {'If': {'test': {'Compare': {'ops': [{'Gt': {}}], 'comparators': [{'Num': {'n': 0}}], 'left': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Attribute': {'ctx': 'Load', 'attr': 'save', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'len'}}, 'starargs': 'None'}}}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'saving to'}}, {'Attribute': {'ctx': 'Load', 'attr': 'save', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'state'}}], 'value': {'Dict': {'keys': [{'Str': {'s': 'opt'}}, {'Str': {'s': 'state_dict'}}, {'Str': {'s': 'lr'}}, {'Str': {'s': 'dict'}}], 'values': [{'Name': {'ctx': 'Load', 'id': 'args'}}, {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'state_dict', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Attribute': {'ctx': 'Load', 'attr': 'dictionary', 'value': {'Name': {'ctx': 'Load', 'id': 'corpus'}}}}]}}}}, {'Expr': {'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'state'}}, {'BinOp': {'op': 'Add', 'right': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'decayed'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'int'}}, 'starargs': 'None'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'str'}}, 'starargs': 'None'}}, 'left': {'BinOp': {'op': 'Add', 'right': {'Str': {'s': '.'}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'save', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}}}], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'save', 'value': {'Name': {'ctx': 'Load', 'id': 'torch'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': []}}, {'If': {'test': {'BoolOp': {'values': [{'BoolOp': {'values': [{'Compare': {'ops': [{'Eq': {}}], 'comparators': [{'Str': {'s': 'sgd'}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'optim', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, {'Compare': {'ops': [{'GtE': {}}], 'comparators': [{'Name': {'ctx': 'Load', 'id': 'prev_valloss'}}], 'left': {'Name': {'ctx': 'Load', 'id': 'valloss'}}}}], 'op': 'And'}}, {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'onmt_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'Name': {'ctx': 'Load', 'id': 'decayed'}}], 'op': 'And'}}], 'op': 'Or'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'decayed'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}, {'AugAssign': {'target': {'Attribute': {'ctx': 'Store', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'value': {'Attribute': {'ctx': 'Load', 'attr': 'lr_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'op': 'Mult'}}, {'If': {'test': {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'ar_after_decay', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}, {'If': {'test': {'BoolOp': {'values': [{'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, {'UnaryOp': {'operand': {'Attribute': {'ctx': 'Load', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}, 'op': 'Not'}}], 'op': 'And'}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'turning on word ar...'}}]}}, {'Assign': {'targets': [{'Attribute': {'ctx': 'Store', 'attr': 'word_ar', 'value': {'Name': {'ctx': 'Load', 'id': 'net'}}}}], 'value': {'Name': {'ctx': 'Load', 'id': 'True'}}}}], 'orelse': []}}], 'orelse': []}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'decaying lr to:'}}, {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}]}}, {'If': {'test': {'Compare': {'ops': [{'Lt': {}}], 'comparators': [{'Num': {'n': 1e-05}}], 'left': {'Attribute': {'ctx': 'Load', 'attr': 'lr', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}, 'body': [{'Break': {}}], 'orelse': []}}], 'orelse': []}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'prev_valloss'}}], 'value': {'Name': {'ctx': 'Load', 'id': 'valloss'}}}}, {'If': {'test': {'Attribute': {'ctx': 'Load', 'attr': 'cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}, 'body': [{'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'ugh....'}}]}}, {'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'shmocals'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Name': {'ctx': 'Load', 'id': 'locals'}}, 'starargs': 'None'}}}}, {'For': {'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'shv'}}], 'value': {'Subscript': {'slice': {'Index': {'value': {'Name': {'ctx': 'Load', 'id': 'shk'}}}}, 'ctx': 'Load', 'value': {'Name': {'ctx': 'Load', 'id': 'shmocals'}}}}}}, {'If': {'test': {'BoolOp': {'values': [{'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Name': {'ctx': 'Load', 'id': 'shv'}}, {'Str': {'s': 'is_cuda'}}], 'func': {'Name': {'ctx': 'Load', 'id': 'hasattr'}}, 'starargs': 'None'}}, {'Attribute': {'ctx': 'Load', 'attr': 'is_cuda', 'value': {'Name': {'ctx': 'Load', 'id': 'shv'}}}}], 'op': 'And'}}, 'body': [{'Assign': {'targets': [{'Name': {'ctx': 'Store', 'id': 'shv'}}], 'value': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'cpu', 'value': {'Name': {'ctx': 'Load', 'id': 'shv'}}}}, 'starargs': 'None'}}}}], 'orelse': []}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'shk'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [], 'func': {'Attribute': {'ctx': 'Load', 'attr': 'keys', 'value': {'Name': {'ctx': 'Load', 'id': 'shmocals'}}}}, 'starargs': 'None'}}}}, {'Print': {'dest': 'None', 'nl': True, 'values': [{'Str': {'s': 'done!'}}]}}, {'Print': {'dest': 'None', 'nl': True, 'values': []}}], 'orelse': [{'Print': {'dest': 'None', 'nl': True, 'values': []}}]}}], 'orelse': [], 'target': {'Name': {'ctx': 'Store', 'id': 'epoch'}}, 'iter': {'Call': {'keywords': [], 'kwargs': 'None', 'args': [{'Num': {'n': 1}}, {'BinOp': {'op': 'Add', 'right': {'Num': {'n': 1}}, 'left': {'Attribute': {'ctx': 'Load', 'attr': 'epochs', 'value': {'Name': {'ctx': 'Load', 'id': 'args'}}}}}}], 'func': {'Name': {'ctx': 'Load', 'id': 'range'}}, 'starargs': 'None'}}}}]}}]}}]}}]}}]}}], 'orelse': []}}]}}
